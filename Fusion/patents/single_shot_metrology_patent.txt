\documentclass[12pt]{article}
\usepackage{geometry}
\usepackage{fancyhdr}
\usepackage{amsmath}
\usepackage{hyperref}
\usepackage{enumitem}

\geometry{letterpaper, margin=1in}
\pagestyle{fancy}
\fancyhead[L]{Patent Draft: Single-Shot Attosecond Metrology}
\fancyhead[R]{Confidential}
\fancyfoot[C]{\thepage}
\setlength{\headheight}{14.5pt}

\title{\textbf{APPARATUS AND METHOD FOR SINGLE-SHOT ATTOSECOND TIMING MEASUREMENT VIA SPATIALLY RESOLVED NON-LINEAR CROSS-CORRELATION}}
\author{Inventor: Jonathan Washburn}
\date{\today}

\begin{document}
\maketitle

\begin{abstract}
An optical metrology system capable of measuring, on a pulse-by-pulse basis, the relative timing error between a reference pulse and a sample pulse with attosecond-class precision (e.g., $< 100$ as) without averaging. The invention utilizes a spatially encoded non-linear cross-correlation geometry in which two pulses intersect within a nonlinear medium at a non-zero crossing angle so that relative delay varies across a transverse coordinate. A nonlinear signal (e.g., sum-frequency generation, difference-frequency generation, or other mixing products) is generated only where the pulses overlap in time and space. The spatial distribution of the nonlinear signal is imaged onto a detector array and processed (e.g., centroiding and/or template matching) to determine an instantaneous timing offset. In some embodiments, the measurement provides both coarse (picosecond) and fine (attosecond) timing information and outputs a timing error to a controller for feed-forward correction of laser jitter in high-repetition-rate fusion drivers and other attosecond-synchronized systems.
\end{abstract}

\section{Technical Field}
The present disclosure relates to ultrafast optical metrology, specifically to systems for measuring the timing jitter and phase stability of pulsed lasers on a single-shot basis for feedback and feed-forward control applications.

\section{Background}
Standard techniques for measuring femtosecond laser timing (e.g., optical cross-correlation, balanced optical cross-correlation) typically require scanning a mechanical delay line or integrating signal over thousands of pulses to build up a correlation trace. This averaging process washes out pulse-to-pulse jitter, making it impossible to correct individual outlier pulses in real-time.

For coherence-controlled fusion, where every pulse must be aligned to the vacuum state with sub-femtosecond precision, a measurement system must determine the error of \textit{each} pulse before it reaches the target. Existing single-shot techniques (e.g., GRENOUILLE, SPIDER) are often designed for pulse \textit{shape} characterization rather than absolute \textit{timing} relative to a reference clock, or lack the dynamic range to handle picosecond-scale jitter with attosecond-scale resolution.

\section{Definitions (Non-Limiting)}
As used herein:
\begin{itemize}[leftmargin=1.2em]
    \item \textbf{Single-shot}: determining a timing error for an individual pulse (or pulse pair) without averaging over multiple pulses.
    \item \textbf{Timing error}: a relative delay between a reference pulse and a sample pulse, optionally expressed as an offset relative to an expected arrival time.
    \item \textbf{Spatial encoding}: mapping time delay into a spatial coordinate or spatial intensity distribution produced by a nonlinear interaction.
    \item \textbf{Bounded latency}: producing an output timing error within a predetermined time budget suitable for real-time correction of a pulse train.
\end{itemize}

\section{Summary}
The invention provides a "Spatial-Temporal Mapping Cross-Correlator" that converts time into space and produces a pulse-by-pulse timing error with bounded latency.

\subsection*{Core Concept}
Two beams (Reference and Sample) intersect in a nonlinear medium (e.g., BBO, LBO, KTP, periodically poled lithium niobate, or other phase-matchable media) at a non-zero crossing angle. Due to the geometry, the time delay between the pulses varies approximately linearly across a transverse coordinate. The interaction produces a nonlinear optical signal (e.g., Sum Frequency Generation, SFG) only where the pulses overlap in time and space. The lateral position and/or spatial distribution of this signal on a detector corresponds to the timing error $\delta t$.

\subsection*{Key Advantages}
\begin{itemize}[leftmargin=1.2em]
    \item \textbf{Single-Shot}: No moving parts, no scanning. The entire time window is measured at once.
    \item \textbf{High Bandwidth}: Measurement speed is limited by detector readout and processing latency, enabling kHz-to-MHz pulse trains.
    \item \textbf{Attosecond-Class Resolution}: With appropriate imaging, calibration, and sub-pixel estimation, sub-femtosecond timing precision is obtained.
    \item \textbf{Large Dynamic Range}: The crossing angle and beam width determine the time window (e.g., $\pm 5$ ps), covering the full jitter range of high-power systems while resolving attosecond variations.
\end{itemize}

\section{Detailed Description}

\subsection{Optical Geometry}
The apparatus comprises:
\begin{enumerate}
    \item \textbf{Reference Input}: Accepts a transform-limited pulse from the Master Clock.
    \item \textbf{Sample Input}: Accepts a fraction of the High-Power Pulse.
    \item \textbf{Cylindrical Focusing}: Optics that focus the beams into lines within the crystal, maximizing the interaction region.
    \item \textbf{Non-Linear Crystal}: A crystal cut for Type-I or Type-II phase matching, positioned at the intersection of the beams.
    \item \textbf{Imaging System}: Lenses that image the interaction plane onto a linear detector array.
\end{enumerate}

\subsection{Reference and Sample Pulse Acquisition (Non-Limiting)}
In some embodiments, the reference pulse is derived from an optical frequency comb or a stabilized oscillator. The sample pulse may be obtained by:
\begin{itemize}
    \item picking off a small fraction of a high-power pulse prior to compression and/or prior to amplification saturation;
    \item generating a low-power replica pulse that shares timing noise with the main pulse via a common seed; or
    \item sampling leakage through a compressor grating or a partially transmitting optic.
\end{itemize}
The sample path may include dispersion compensation so that the sample pulse duration and chirp are compatible with the nonlinear interaction.

\subsection{Mapping Function}
The time delay $\tau$ mapped to position $x$ is given by:
\[ \tau(x) = \frac{2x \sin(\theta/2)}{c} \]
where $\theta$ is the crossing angle and $c$ is the speed of light.
A larger angle $\theta$ increases time resolution (more pixels per femtosecond) but reduces the dynamic range. The invention may employ multiple crystals at different angles to achieve both coarse (picosecond) and fine (attosecond) measurement simultaneously.

\subsection{Multi-Scale Measurement (Coarse + Fine)}
In one embodiment, a coarse channel covers a wide time window (e.g., several picoseconds) using a first crossing angle, while a fine channel covers a narrower window (e.g., hundreds of femtoseconds) using a second crossing angle and/or higher spatial magnification. A processor combines the outputs to determine an absolute timing error with both large capture range and high precision.

\subsection{Normalization and Noise Rejection}
To reduce sensitivity to pulse energy fluctuations, the processor may normalize the nonlinear signal by one or more reference measurements (e.g., monitoring the reference and sample pulse energies) and/or employ balanced detection. In some embodiments, the processor uses a matched filter or template correlation against a calibrated spatial response function to estimate delay.

\subsection{Centroiding Algorithm}
The detector output is processed by an FPGA. The intensity distribution $I(x)$ is analyzed to find the center of mass (centroid):
\[ x_{cm} = \frac{\sum x \cdot I(x)}{\sum I(x)} \]
This calculation is robust to amplitude fluctuations and provides sub-pixel resolution, enabling the attosecond precision.

\subsection{Latency and Output Interface}
In some embodiments, the apparatus outputs a timing error value within a bounded latency suitable for feed-forward correction. The timing error may be transmitted as an analog voltage, a digital word, or a serialized data stream to a correction actuator (e.g., electro-optic phase modulator, acousto-optic modulator, or delay stage).

\subsection{Calibration and Drift Compensation (Non-Limiting)}
In some embodiments, the mapping from spatial coordinate to time delay is calibrated using one or more known delay references (e.g., a fixed optical delay element, a temperature-stabilized reference path, or a calibrated variable delay line). The apparatus may periodically re-calibrate or apply drift compensation based on environmental sensors (e.g., temperature) and/or known timing markers in the reference pulse train.

\section{Claims}

\begin{enumerate}[leftmargin=1.6em]
    \item An optical metrology apparatus for measuring the relative timing of two optical pulses, comprising:
    \begin{itemize}
        \item A first optical input path for a reference pulse;
        \item A second optical input path for a sample pulse;
        \item Beam shaping optics configured to intersect the reference pulse and the sample pulse within a nonlinear optical medium at a non-zero crossing angle, such that a temporal delay between the pulses varies spatially across an interaction region;
        \item A detector array positioned to detect a nonlinear optical signal generated in the interaction region; and
        \item A processor configured to calculate a spatial position of the detected signal and map said position to a time delay value.
    \end{itemize}

    \item The apparatus of claim 1, wherein the processor is configured to calculate the time delay value for a single pair of pulses without averaging.

    \item The apparatus of claim 1, wherein the nonlinear optical signal is a sum-frequency generation (SFG) signal.

    \item The apparatus of claim 1, wherein the processor comprises an FPGA configured to compute a centroid of the detected signal intensity distribution.

    \item The apparatus of claim 1, configured to resolve timing differences of less than 100 attoseconds.

    \item The apparatus of claim 1, wherein the detector array comprises a linear sensor array.

    \item The apparatus of claim 1, wherein the detector array comprises a two-dimensional camera and the processor is configured to compute the time delay value from a two-dimensional intensity pattern.

    \item The apparatus of claim 1, further comprising a calibration procedure configured to map pixel position to time delay based on at least one known delay reference.

    \item The apparatus of claim 1, further comprising a coarse measurement channel and a fine measurement channel, the coarse measurement channel having a larger time capture range than the fine measurement channel, and the processor configured to combine outputs of the coarse and fine measurement channels to produce the time delay value.

    \item The apparatus of claim 1, wherein the nonlinear optical medium comprises a birefringent crystal cut for Type-I or Type-II phase matching.

    \item The apparatus of claim 1, wherein the processor is configured to normalize the nonlinear optical signal based on measured pulse energies of the reference pulse and the sample pulse.

    \item A method for real-time laser jitter correction, comprising:
    \begin{itemize}
        \item Intersecting a reference pulse and a sample pulse in a nonlinear crystal at a predetermined angle;
        \item Detecting the spatial position of the resulting interaction signal on a sensor array;
        \item Calculating an instantaneous timing error from the spatial position;
        \item Transmitting the timing error to a phase modulator; and
        \item Applying a correction to a main laser pulse based on the timing error.
    \end{itemize}

    \item The method of claim 12, wherein calculating the instantaneous timing error comprises computing a centroid of an intensity distribution on the sensor array.

    \item The method of claim 12, further comprising generating the reference pulse from an optical frequency comb and generating the sample pulse from a replica of a high-power pulse that shares a common seed with the main laser pulse.

    \item The apparatus of claim 1, wherein the processor is configured to output the time delay value with a bounded latency less than a pulse period of a pulse train of the sample pulse.

    \item A timing correction system, comprising:
    \begin{itemize}
        \item the apparatus of claim 1;
        \item a timing correction actuator configured to apply an adjustable optical delay and/or phase shift to a main laser pulse; and
        \item a controller configured to drive the timing correction actuator based on the time delay value.
    \end{itemize}

    \item The timing correction system of claim 16, wherein the timing correction actuator comprises at least one of: an electro-optic modulator, an acousto-optic modulator, or a variable optical delay line.

    \item The method of claim 12, wherein applying the correction to the main laser pulse comprises applying a pre-compensating delay prior to at least one of: amplification, compression, or target delivery.

    \item A method for calibrating a single-shot timing metrology apparatus, comprising:
    \begin{itemize}
        \item applying at least one known timing offset between a reference pulse and a sample pulse;
        \item measuring a corresponding spatial response of a nonlinear signal on a detector array; and
        \item generating a calibration mapping between detector coordinates and time delay values.
    \end{itemize}

    \item The method of claim 19, further comprising periodically updating the calibration mapping based on at least one measured environmental parameter or a known timing marker embedded in a reference pulse train.

    \item A non-transitory computer-readable medium storing instructions that, when executed by a processor, cause the processor to:
    \begin{itemize}
        \item receive image data corresponding to a spatially encoded nonlinear interaction between a reference pulse and a sample pulse;
        \item estimate a time delay between the reference pulse and the sample pulse using at least one of: centroiding, matched filtering, or template correlation; and
        \item output a timing error value to a timing correction actuator for feed-forward correction.
    \end{itemize}
\end{enumerate}

\end{document}
